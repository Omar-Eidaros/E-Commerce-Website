/* 
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/JavaScript.js to edit this template
 */


var values = '';
var code = 123456 //<!%value to be generated>//

function chkErr() {

    values = $("#registeration").serialize();
    $.ajax({
        url: '/TechStore2/Registeration',
        method: 'POST',
        data: values
        ,
        success:
                function (resultText) {
                    //console.log(resultText)
                    chkRes(resultText);
                }

        ,
        error: function (jqXHR, exception) {

        }
    }
    );
}
function chkRes(text) {
    var name = $("#name");
    var email = $('#email');
//                                                        
    var password = $("#pass");
    var birthDate = $("#bdate");
    var phone = $("#phone");
    var address = $("#address");
    var interests = $("#interests");
    var job = $("#job");
    if (text == "") {
        //   console.log("ok");
        var code = $("#code");
        var reg = $("#block")
        code.css("display", "block")
        reg.css("display", "none")

    } else {
        //      console.log(values);
        //   console.log("false");
        var Err = jQuery.parseJSON(text);
        console.log(Err);
        name.html(Err.name);
        email.html(Err.email);
        password.html(Err.password);
        job.html(Err.job);
        birthDate.html(Err.bdate);
        interests.html(Err.interests);
        address.html(Err.street + "<br>" + Err.city);
        phone.html(Err.phone);
    }
}
function validate() {
    var codeEntered = $("#validation")

    if (codeEntered.val() == code) {
        console.log(values);
        $.ajax({

            url: '/TechStore2/PhoneValid',
            method: 'POST',
            data: values
            ,
            success:
                    function (resultText) {
                        console.log("added to database")
                        window.location.href = "/TechStore2/index.html";
                    }

            ,
            error: function (jqXHR, exception, data) {

            }
        });
    } else {
        console.log("error");
    }
}

function resend() {
    code = 444444;//<!% generate new code >
}
function requestCall() {
    //<!%call function that uses recorded call>
    code = 343536;//<!%new code generated by call >
}
